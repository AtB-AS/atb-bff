query Trips($from: Location!, $to: Location!, $when: DateTime) {
  trip(from: $from, to: $to, dateTime: $when) {
    metadata {
      nextDateTime
      prevDateTime
      searchWindowUsed
    }
    tripPatterns {
      expectedStartTime
      expectedEndTime
      duration
      walkDistance
      legs {
        mode
        distance
        duration
        aimedStartTime
        expectedEndTime
        expectedStartTime
        realtime
        line {
          id
          publicCode
          name
          transportSubmode
        }
        fromEstimatedCall {
          aimedDepartureTime
          expectedDepartureTime
          destinationDisplay {
            frontText
          }
          quay {
            publicCode
            name
          }
        }
        situations {
          situationNumber
          description {
            value
          }
        }
        fromPlace {
          name
          longitude
          latitude
          quay {
            publicCode
            name
            longitude
            latitude
            stopPlace {
              longitude
              latitude
              name
            }
          }
        }
        toPlace {
          name
          longitude
          latitude
          quay {
            publicCode
            name
            longitude
            latitude
            stopPlace {
              longitude
              latitude
              name
            }
          }
        }
        serviceJourney {
          id
        }
        interchangeTo {
          ToServiceJourney {
            id
          }
        }
        pointsOnLink {
          points
          length
        }
        intermediateEstimatedCalls {
          quay {
            name
            id
          }
        }
        authority {
          id
        }
        transportSubmode
      }
    }
  }
}
